from requests.auth import HTTPBasicAuth
import requests
import json

username = 'vijay4587'
password = 'Exjxxd6fF9Tk2VMwabBY'

url = "https://api.bitbucket.org/2.0/repositories/vijay4587/main_repository/src"
auth1 = HTTPBasicAuth(username, password)

files = {'upload_file': open('devices.txt', 'rb')}
# values = {'DB': 'photcat', 'OUT': 'csv', 'SHORT': 'short'}
# r = requests.post(url, files=files, data=values)

headers = {
    "Accept": "application/json",
}

response = requests.request(
    "POST",
    url,
    headers=headers,
    auth=auth1,

    files=files,
    # data=values
)

print(response.text)
